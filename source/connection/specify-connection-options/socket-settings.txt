.. _mcs-socket-settings:

================
Socket Settings
================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. facet::
   :name: genre
   :values: reference

Overview
--------

In this guide, you can learn about how the {+driver-short+} manages socket
settings. 

Chain the `applyToSocketSettings() <{+api+}/apidocs/mongodb-driver-core/com/mongodb/MongoClientSettings.Builder.html#applyToSocketSettings(com.mongodb.Block)>`__
method to modify the driver's behavior when connecting and communicating
with your MongoDB deployment.

The following table describes the methods you can chain to your settings
to modify the driver's behavior:

.. list-table::
   :widths: 40 60
   :header-rows: 1

   * - Method
     - Description

   * - ``applyConnectionString()``
     - Uses the settings from a ``ConnectionString`` object.

   * - ``applySettings()``
     - Uses the socket settings specified in a ``SocketSettings`` object.

   * - ``connectTimeout()``
     - | Sets the maximum time to connect to an available socket before throwing
         a timeout exception.
       |
       | **Default**: ``10 seconds``

   * - ``readTimeout()``
     - | Sets the maximum time to read from an available socket before throwing a
         timeout exception.
       |
       | **Default**: ``0``, which indicates no timeout

   * - ``receiveBufferSize()``
     - | Sets the socket's buffer size when receiving.
       |
       | **Default**: The operating system default

   * - ``sendBufferSize()``
     - | Sets the socket's buffer size when sending.
       |
       | **Default**: The operating system default

.. note:: Connect to MongoDB by using a SOCKS5 Proxy

  You can chain the ``applyToProxySettings()`` method to your socket settings to
  connect to MongoDB by using a SOCKS5 proxy. To learn how to use a SOCKS5 proxy 
  and set proxy settings, see the :ref:`Connect to MongoDB by Using a SOCKS5 Proxy 
  <java-connect-socks>` guide. 

.. _java-socketsettings-example:

Example
-------

This example specifies the following driver behavior in a MongoDB socket:

- To connect to an available socket within ``10 SECONDS``
- To read from an available socket within ``15 SECONDS``

.. literalinclude:: /includes/fundamentals/code-snippets/MCSettings.java
   :start-after: begin SocketSettings
   :end-before: end SocketSettings
   :language: java
   :emphasize-lines: 3-5
   :dedent:
